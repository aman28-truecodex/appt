<div class="container-fluid gryBG">
  <div class="row">
    <div class="col-md-12 mt-4 bscTable">
      <div class="boxs_BG mt-1">
        <div class="titleBG"> Milestones</div>
        <form [formGroup]="milestoneForm">
          <div class="row mt-4">
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Organization Unit Code
                  <span
                    class="red">*</span>
                  <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                        title="{{tooltipInfo.orgCode}}"></span>
                </label>
                <div class="col-sm-7">
                  <select
                    (change)="getCodeAndName(); onFocusForElement('orgCode')"
                    (focusout)="onFocusOutForElement()"
                    [ngClass]="{'my-error': shouldShowErrors('orgCode', milestoneForm)}"
                    formControlName='orgCode' name='orgCode' class="form-control col-form-label-sm">
                    <option selected [ngValue]="null">Select Unit Code</option>
                    <option *ngFor="let codeName of codeAndName" [ngValue]="codeName.code">
                      {{ codeName.code}}
                    </option>
                  </select>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Organization Unit Name </label>
                <div class="col-sm-7">
                  <input type="text" class="form-control col-form-label-sm" formControlName="orgName" name="orgName"
                         (focus)="onFocusForElement('orgName')"
                         (focusout)="onFocusOutForElement()"
                         readonly
                         placeholder="Organization Unit Name">
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Scorecard Code
                  <span
                    class="red">*</span>
                  <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                        title="{{tooltipInfo.scCode}}"></span>
                </label>
                <div class="col-sm-7">
                  <select class="form-control col-form-label-sm"
                          (change)="getScorecardName(); onFocusForElement('scCode')"
                          (focusout)="onFocusOutForElement()"
                          [ngClass]="{'my-error': shouldShowErrors('scCode', milestoneForm)}"
                          formControlName="scCode" name="scCode">
                    <option selected [value]="null">Select Scorecard</option>
                    <option *ngFor="let item of balanceScoreCardData" [value]="item.code">{{item.code}}</option>
                  </select>
                </div>
              </div>

            </div>
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Scorecard Name </label>
                <div class="col-sm-7">
                  <input type="text" class="form-control col-form-label-sm" formControlName="scName"
                         name="scName"
                         readonly
                         placeholder="Scorecard Name">
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Initiative Code
                  <span
                    class="red">*</span>
                  <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                        title="{{tooltipInfo.initiativeCode}}"></span>
                </label>
                <div class="col-sm-7">
                  <select
                    (change)="getInitiativeName(); onFocusForElement('initiativeCode')"
                    (focusout)="onFocusOutForElement()"
                    [ngClass]="{'my-error': shouldShowErrors('initiativeCode', milestoneForm)}"
                    formControlName='initiativeCode' name='initiativeCode' class="form-control col-form-label-sm">
                    <option selected [ngValue]="null">Select Initiative Code</option>
                    <option *ngFor="let codeName of initiativeCode" [ngValue]="codeName.code">
                      {{ codeName.code}}
                    </option>
                  </select>
                </div>
              </div>

            </div>
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Initiative Name </label>
                <div class="col-sm-7">
                  <input type="text" class="form-control col-form-label-sm" formControlName="initiativeName"
                         name="initiativeName"
                         readonly
                         placeholder="Initiative Name">
                </div>
              </div>

            </div>
          </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group row m-0">
                    <label for="" class="col-sm-5 col-form-label col-form-label-sm">Milestone Code
                      <span
                        class="red">*</span>
                      <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                            title="{{tooltipInfo.milestoneCode}}"></span>
                    </label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control col-form-label-sm" placeholder="Milestone Code"
                             (focus)="onFocusForElement('code')"
                             (focusout)="onFocusOutForElement()"
                             [ngClass]="{'my-error': shouldShowErrors('code', milestoneForm)}"
                             formControlName="code" name="code">
                    </div>
                  </div>
    

                </div>
                <div class="col-md-6">
                  <div class="form-group row m-0">
                    <label for="" class="col-sm-5 col-form-label col-form-label-sm">Milestone Name
                      <span
                        class="red">*</span>
                    </label>
                    <div class="col-sm-7">
                      <input type="text" class="form-control col-form-label-sm" placeholder="Milestone Name"
                             (focus)="onFocusForElement('name')"
                             (focusout)="onFocusOutForElement()"
                             [ngClass]="{'my-error': shouldShowErrors('name', milestoneForm)}"
                             formControlName="name" name="name">
                    </div>
                  </div>

                </div>
              </div>
<div class="row">
  <div class="col-md-6">
    <div class="form-group row m-0">
      <label for="" class="col-sm-5 col-form-label col-form-label-sm">Description </label>
      <div class="col-sm-7">
      <textarea class="form-control col-form-label-sm" placeholder="Description"
                formControlName="description" name="description"></textarea>
      </div>
    </div>

  </div>
  <div class="col-md-6">
    <div class="form-group row m-0">
      <label for="" class="col-sm-5 col-form-label col-form-label-sm">Owner </label>
      <div class="col-sm-7">
        <select
          formControlName='owner' name='owner'
          class="form-control col-form-label-sm">
          <option selected [value]="null">Select Owner</option>
          <option *ngFor="let item of empMasterData" [value]="item.employeeName">
            {{ item.employeeName | uppercase}}
          </option>
        </select>
      </div>
    </div>
    <div class="form-group row m-0">
      <label for="" class="col-sm-5 col-form-label col-form-label-sm">Collaborators </label>
      <div class="col-sm-7">
        <select
          formControlName='collaborators' name='collaborators'
          class="form-control col-form-label-sm">
          <option selected [value]="null">Select collaborator</option>
          <option *ngFor="let item of empMasterData" [value]="item.employeeName">
            {{ item.employeeName | uppercase}}
          </option>
        </select>
      </div>
    </div>

  </div>
</div>
             
          

            <!-- </div> -->
            <div class="col-md-6 ">
            
             
            

            
              
            </div>
        <!--   </div> -->

          <hr/>

          <div class="row mt-4">
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Evaluation Master Measure </label>
                <div class="col-sm-7 pr-0">
                  <select class="form-control col-form-label-sm">
                    <option>Select Evaluation Master Measure</option>
                    <option>Evaluation 1</option>
                    <option>Evaluation 2</option>
                  </select>
                </div>
              </div>


            </div>

            <div class="col-md-6">

              <div class="form-group row m-0">
                <label class="col-sm-4 col-form-label col-form-label-sm">Duration </label>
                <div class="col-sm-3 ml-5">
                  <input type="text" class="form-control mb-3" placeholder="Start Date" bsDatepicker
                         autocomplete="off"
                         (focus)="onFocusForElement('startDate')"
                         (focusout)="onFocusOutForElement()"
                         [ngClass]="{'my-error': shouldShowErrors('startDate', milestoneForm)}"
                         [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                         [(ngModel)]="startDate" value="{{ startDate | date:'dd-MM-yyyy' }}"
                         formControlName="startDate" name="startDate"/>
                </div>
                <div class="col-sm-3 ml-5">
                  <input type="text" class="form-control mb-3" placeholder="End Date" bsDatepicker autocomplete="off"
                         (focus)="onFocusForElement('endDate')"
                         (focusout)="onFocusOutForElement()"
                         [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                         [(ngModel)]="endDate" value="{{ endDate | date:'dd-MM-yyyy' }}"
                         [ngClass]="{'my-error': shouldShowErrors('endDate', milestoneForm)}"
                         formControlName="endDate" name="endDate"/>

                </div>
              </div>

            </div>

          </div>

          <hr/>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Milestone Analysis </label>
                <div class="col-sm-7 pr-0">
                <textarea class="form-control col-form-label-sm" placeholder="Milestone Analysis"
                          formControlName="analysis" name="analysis"></textarea>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Milestone Recommendation </label>
                <div class="col-sm-7">
                <textarea class="form-control col-form-label-sm" formControlName="recommendation"
                          name="recommendation"
                          placeholder="Milestone Recommendation"></textarea>
                </div>
              </div>
            </div>
          </div>

          <hr/>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label class="col-sm-5 col-form-label col-form-label-sm">Status </label>
                <div class="col-sm-7 pr-0">
                  <select
                    formControlName='status' name='status' class="form-control col-form-label-sm">
                    <option selected [value]="null">Select Status</option>
                    <option *ngFor="let item of status" [value]="item.status">
                      {{ item.status}}
                    </option>
                  </select>
                </div>
              </div>
              <br/>

              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Percent Complete </label>
                <div class="col-sm-7 pr-0">
                  <ng5-slider [options]="options" [(value)]="value"
                              (valueChange)="percentCompleted($event)"></ng5-slider>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row m-0">
                <label for="" class="col-sm-5 col-form-label col-form-label-sm">Completed Date</label>
                <div class="col-sm-7">
                  <input type="text" class="form-control mb-3" placeholder="From" bsDatepicker autocomplete="off"
                         onkeydown="return false"
                         [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                         [(ngModel)]="completionDate" value="{{ completionDate | date:'dd-MM-yyyy' }}"
                         formControlName="completionDate" name="completionDate"/>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-5 col-form-label ml-3">Milestone Completed </label>
                <div class="col-sm-5">
                  <div class="form-check">
                    <input class="form-check-input position-static" type="checkbox" id="blankCheckbox"
                           formControlName="completed"
                           (change)="isChecked($event)"
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>



        </form>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="float-right">
            <button type="button" class="btn btn-info btn-sm mr-1" (click)="saveMilestone()"
                    [disabled]="!milestoneForm.valid"[ngClass]="{'button-disabled': !milestoneForm.valid}"> Save</button>
            <button type="button" class="btn btn-cancel btn-sm" (click)="clearField()">Cancel</button>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">

        <div class="boxs_BG mt-1">

      <input class="form-control col-form-label-sm float-right" (keyup)="applyFilter($event.target.value)"
             placeholder="Search..." type="text" style="width: 300px;margin-bottom: 8px">

      <table mat-table [dataSource]="dataSource" matSort>

        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->

        <ng-container matColumnDef="sNo">
          <th mat-header-cell *matHeaderCellDef>S.No</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ (paginatorRef.pageIndex * paginatorRef.pageSize) + (i + 1) }}
          </td>
        </ng-container>

        <!-- Position Column -->
        <ng-container matColumnDef="orgCode">
          <th mat-header-cell *matHeaderCellDef>Organization</th>
          <td mat-cell *matCellDef="let element"> {{element.orgCode}} - {{element.orgName}}
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="initiativeCode">
          <th mat-header-cell *matHeaderCellDef>Initiative</th>
          <td mat-cell *matCellDef="let element"> {{element.initiativeCode}} - {{element.initiativeName}}</td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="code">
          <th mat-header-cell *matHeaderCellDef>Milestone</th>
          <td mat-cell *matCellDef="let element"> {{element.code}} - {{element.name}}</td>
        </ng-container>

        <ng-container matColumnDef="owner">
          <th mat-header-cell *matHeaderCellDef>Owner</th>
          <td mat-cell *matCellDef="let element"> {{element.owner ? element.owner : 'NA'}}</td>
        </ng-container>

        <ng-container matColumnDef="collaborators">
          <th mat-header-cell *matHeaderCellDef>Collaborator</th>
          <td mat-cell *matCellDef="let element"> {{element.collaborators}}</td>
        </ng-container>

        <ng-container matColumnDef="startDate">
          <th mat-header-cell *matHeaderCellDef>Start Date</th>
          <td mat-cell *matCellDef="let element"> {{element.startDate}}</td>
        </ng-container>

        <ng-container matColumnDef="endDate">
          <th mat-header-cell *matHeaderCellDef>End Date</th>
          <td mat-cell *matCellDef="let element"> {{element.endDate}}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element"> {{element.status ? element.status : 'NA'}}</td>
        </ng-container>

        <ng-container matColumnDef="percentComplete">
          <th mat-header-cell *matHeaderCellDef>Percent Complete</th>
          <td mat-cell *matCellDef="let element"> {{element.percentComplete ? element.percentComplete : 0}}%</td>
        </ng-container>

        <ng-container matColumnDef="completed">
          <th mat-header-cell *matHeaderCellDef>Completed</th>
          <td mat-cell *matCellDef="let element"> {{element.completed ? 'Completed' : 'Incomplete'}}</td>
        </ng-container>

        <ng-container matColumnDef="completionDate">
          <th mat-header-cell *matHeaderCellDef>Completion Date</th>
          <td mat-cell *matCellDef="let element"> {{element.completionDate ? element.completionDate : 'NA'}}</td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let element">
         <span class="btn btn-pink btn-sm">
         <i class="fa fa-pencil p-1" (click)="editMilestone(element.id, element)"></i>
         <i class="fa fa-trash p-1" (click)="confirmDelete(element.id)"></i>
         </span>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-primary"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <mat-paginator [pageSizeOptions]="[2,4,6,8,10]" [pageSize]="10" #paginatorRef>
      </mat-paginator>
      <h6 class="text-center p-2" *ngIf="milestone.length === 0">No Milestone exist, Please Add.</h6>
      </div>
    </div>
  </div>

    </div>
  </div>
</div>
