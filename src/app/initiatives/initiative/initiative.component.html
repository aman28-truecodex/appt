<div class="container-fluid gryBG">
  <div class="row">
    <div class="col-md-12 mt-4 bscTable">
      <form [formGroup]="initiativeForm">
        <div class="example-container">
          <div class="boxs_BG mt-1">
            <div class="titleBG">Initiative</div>
            <div class="row mt-4">
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label class="col-sm-5 col-form-label col-form-label-sm">Organization Unit Code
                    <span class="red">*</span>
                    <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                          title="{{tooltipInfo.orgCode}}"></span>
                  </label>
                  <div class="col-sm-7">
                    <select placeholder="Parent Organization Unit Code"
                            (change)="getCodeNameForPestal(); onFocusForElement('orgCode')"
                            (focusout)="onFocusOutForElement()"
                            [ngClass]="{'my-error': shouldShowErrors('orgCode', initiativeForm)}"
                            formControlName='orgCode'
                            name='orgCode' class="form-control col-form-label-sm">
                      <option selected [ngValue]="null">Select Unit Code</option>
                      <option *ngFor="let codeName of codeAndName" [ngValue]="codeName.code">
                        {{ codeName.code}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Organization Unit Name </label>
                  <div class="col-sm-7 pr-0">
                    <input type="text" class="form-control col-form-label-sm" formControlName="orgName" name="orgName"
                           readonly placeholder="Organization Unit Name"></div>
                </div>

              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label class="col-sm-5 col-form-label col-form-label-sm">Scorecard Code
                    <span class="red">*</span>
                    <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                          title="{{tooltipInfo.scCode}}"></span>
                  </label>
                  <div class="col-sm-7">
                    <select class="form-control col-form-label-sm"
                            (ngModelChange)="getScorecardName($event); onFocusForElement('scCode')"
                            (focusout)="onFocusOutForElement()"
                            [ngClass]="{'my-error': shouldShowErrors('scCode', initiativeForm)}"
                            formControlName="scCode"
                            name="scCode">
                      <option selected [ngValue]="null">Select Unit Code</option>
                      <option *ngFor="let item of balanceScoreCardData" [ngValue]="item.code">{{item.code}}</option>
                    </select>
                  </div>
                </div>

              </div>
              <div class="col-md-6">
                
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Scorecard Name </label>
                  <div class="col-sm-7 pr-0">
                    <input type="text" class="form-control col-form-label-sm" placeholder="Scorecard" readonly
                           formControlName="scName" name="scName">
                  </div>
                </div>

              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Initiative Code
                    <span class="red">*</span>
                    <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip" data-placement="top"
                          title="{{tooltipInfo.initiativeCode}}"></span>
                  </label>
                  <div class="col-sm-7">
                    <input type="text" class="form-control col-form-label-sm" placeholder="Initiative"
                           (focus)="onFocusForElement('code')" (focusout)="onFocusOutForElement()"
                           [ngClass]="{'my-error': shouldShowErrors('code', initiativeForm)}" formControlName="code">
                  </div>
                </div>

              </div>
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Initiative name
                    <span class="red">*</span>
                  </label>
                  <div class="col-sm-7 pr-0">
                    <input type="text" class="form-control col-form-label-sm" placeholder="Initiative"
                           (focus)="onFocusForElement('name')" (focusout)="onFocusOutForElement()"
                           [ngClass]="{'my-error': shouldShowErrors('name', initiativeForm)}" formControlName="name"
                           name="name">
                  </div>
                </div>

              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Objective code
                    <span class="red">*</span>
                  </label>
                  <div class="col-sm-7">
                    <select class="form-control col-form-label-sm"
                            (ngModelChange)="getObj($event); onFocusForElement('objectiveCode')" *ngIf="!isTextBox"
                            (focusout)="onFocusOutForElement()"
                            [ngClass]="{'my-error': shouldShowErrors('objectiveCode', initiativeForm)}"
                            formControlName="objectiveCode" name="objectiveCode">
                      <option selected [ngValue]="null">Link Objective</option>
                      <option *ngFor="let item of AllObjectivesByScCode" [ngValue]="item.code">{{item.code}}</option>
                    </select>
                    <input type="text" class="form-control col-form-label-sm" formControlName="objectiveCode"
                           *ngIf="isTextBox" name="objectiveCode" readonly placeholder="Organization Unit Name">
                  </div>
                </div>

              </div>
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Objective Name </label>
                  <div class="col-sm-7 pr-0">
                    <input type="text" class="form-control col-form-label-sm" placeholder="Objective" readonly
                           formControlName="objectiveName" name="objectiveName">
                  </div>
                </div>

              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row m-0">
                  <label for="" class="col-sm-5 col-form-label col-form-label-sm">Description </label>
                  <div class="col-sm-7">
                    <textarea class="form-control col-form-label-sm" placeholder="Description"
                              formControlName="description" name="description"></textarea>
                  </div>
                </div>

              </div>
            </div>
                
              
                
                
            
              
            <div class="col-md-6 ">
              


              

             
              </div>


         <!--    </div> -->
          </div>
        </div>
        <div class="row">
          <div class="col-md-7">
            <div class="boxs_BG">
              <div class="row">
                <div class="col-md-12">
                  <div class="row ">
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Reporting Frequency </label>
                        <div class="col-sm-7">
                          <select class="form-control col-form-label-sm" formControlName="reportingFrequency"
                                  name="reportingFrequency">
                            <option selected [value]="null">Reporting Frequency</option>
                            <option *ngFor="let item of reportingFrequency" [value]="item.frequency">
                              {{ item.frequency}}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 mt-4">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Duration</label>
                        <div class="col-sm-7">
                          <input type="text" class="form-control" placeholder="From" bsDatepicker
                          (focus)="onFocusForElement('startDate')" (focusout)="onFocusOutForElement()"
                          [ngClass]="{'my-error': shouldShowErrors('startDate', initiativeForm)}"
                          autocomplete="off"
                          [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                          [(ngModel)]="startDate" value="{{ startDate | date:'dd-MM-yyyy' }}"
                          formControlName="startDate" name="startDate"/>
                        </div>
                      </div>

                    </div>
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">
                        
                        </label>
                        <div class="col-sm-7 pr-0 mt-4">
                          <input type="text" class="form-control" placeholder="To" bsDatepicker
                                     autocomplete="off" (focus)="onFocusForElement('endDate')"
                                     (focusout)="onFocusOutForElement()"
                                     [ngClass]="{'my-error': shouldShowErrors('endDate', initiativeForm)}"
                                     [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                                     [(ngModel)]="endDate" value="{{ endDate | date:'dd-MM-yyyy' }}"
                                     formControlName="endDate" name="endDate"/>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Budget
                          <span class="fa fa-info-circle cursorPointer info-styles" data-toggle="tooltip"
                                data-placement="top" title="{{tooltipInfo.budget}}"></span>
                        </label>
                        <div class="col-sm-7">
                          <input type="text" class="form-control col-form-label-sm" placeholder="Budget"
                                 formControlName="budget" name="budget">
                        </div>
                      </div>

                    </div>
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Owner </label>
                        <div class="col-sm-7 pr-0">
                          <select formControlName='owner' name='owner' class="form-control col-form-label-sm">
                            <option selected [value]="null">Select Owner</option>
                            <option *ngFor="let item of empMasterData" [value]="item.employeeName">
                              {{ item.employeeName | uppercase}}
                            </option>
                          </select>
                        </div>
                      </div>

                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Currency </label>
                        <div class="col-sm-7">
                          <select class="form-control col-form-label-sm" formControlName="currencyType"
                                  name="currencyType">
                            <option selected [value]="null">Select currency Unit</option>
                            <option *ngFor="let unit of currencyUnit" [value]="unit.type">
                              {{ unit.type}}
                            </option>
                          </select>
                        </div>
                      </div>

                    </div>
                    <div class="col-md-6">
                      <div class="form-group row m-0">
                        <label for="" class="col-sm-5 col-form-label col-form-label-sm">Attachments </label>
                        <div class="col-sm-7 pr-0">
                          <div class="custom-file">
                            <input type="file" class="custom-file-input" id="customFileLang" lang="es" #myInput
                                   (change)="uploadLogo($event)">
                            <label class="custom-file-label" for="customFileLang">{{fileName}}</label>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                     
                      
                   
                 <!--    </div> -->
                    <div class="col-md-6 ">
                   
                      
                    
                    </div>
            <!--       </div> -->


                </div>

              </div>

              <div class="">
                <div class="">
                  <div class="form-group row row m-0">
                    <label for="" class="col-sm-2 col-form-label  col-form-label">Planned Major Expenditure </label>
                    <div class="col-sm-10 pr-0">
                      <textarea class="form-control initiativescreentextarea col-form-label" placeholder="Planed Mager Expendature"
                                formControlName="plannedMajorExpenditure" name="plannedMajorExpenditure"></textarea>
                    </div>
                  </div>
                </div>


              </div>


            </div>
          </div>
          <div class="col-md-5">
            <div class="boxs_BG" style="height:255px;">
              <!-- <div class="titleBG"> Values </div> -->
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group row m-0 ">
                    <label for="" class="col-sm-5 col-form-label col-form-label-sm">Analysis </label>
                    <div class="col-sm-7 pr-0 ">
                      <textarea class="form-control col-form-label-sm" placeholder="Analysis" formControlName="analysis"
                                name="analysis"></textarea>
                    </div>
                  </div>

                  <div class="form-group row m-0 ">
                    <label for="" class="col-sm-5 col-form-label col-form-label-sm">Recommendation </label>
                    <div class="col-sm-7 pr-0">
                      <textarea class="form-control col-form-label-sm" placeholder="Recommendation"
                                formControlName="recommendations"></textarea>
                    </div>
                  </div>

                </div>

              </div>


            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="boxs_BG">
              <!-- <div class="titleBG"> Value Gap Closer </div> -->
              <div class="row">
                <div class="col-md-5">
                  <div class="form-group row m-0">
                    <label for="" class="col-sm-3 col-form-label col-form-label-sm">Status </label>
                    <div class="col-sm-9 pr-0">
                      <select formControlName='status' name='status' class="form-control col-form-label-sm">
                        <option selected [value]="null">Select Status</option>
                        <option *ngFor="let item of status" [value]="item.status">
                          {{ item.status}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row mt-5">
                    <label class="col-sm-3 col-form-label-sm">Completed Date</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control mb-3" placeholder="Completed Date" bsDatepicker
                             onkeydown="return false"
                             autocomplete="off"
                             [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                             [(ngModel)]="completionDate" value="{{ completionDate | date:'dd-MM-yyyy' }}"
                             placement="top"
                             formControlName="completionDate" name="completionDate"/>
                    </div>
                  </div>

                </div>
                <div class="col-md-7">
                  <div class="form-group row m-0">
                    <label for="" class="col-sm-3 col-form-label col-form-label-sm">Percent Complete </label>
                    <div class="col-sm-9 pr-0">
                      <ng5-slider [options]="options" [(value)]="value" (valueChange)="percentCompleted($event)">
                      </ng5-slider>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-sm-3 col-form-label mt-3 ml-3">Complete </label>
                    <div class="col-sm-8 mt-4">
                      <div class="custom-control custom-checkbox">
                        <input class="form-check-input position-static" type="checkbox" id="blankCheckbox"
                               formControlName="completed"
                               (change)="isCompleted($event)">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <div class="row">
              <div class="offset-10 float-right">
                <button type="button" class="btn btn-info btn-sm  mr-1" (click)="saveInitiative()"
                        [disabled]="!initiativeForm.valid" [ngClass]="{'button-disabled': !initiativeForm.valid}"> Save
                </button>
                <button type="button" class="btn btn-cancel btn-sm " (click)="clearFields()"> Cancel</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="boxs_BG ">
              <div class="titleBG">Initiative Table</div>
              <div class="scrollbarinitiatives">
              <input class="form-control col-form-label-sm float-right" (keyup)="applyFilter($event.target.value)"
                     placeholder="Search..." type="text" style="width: 300px;margin-bottom: 8px">

              <table  mat-table [dataSource]="dataSource">




                <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->

                <ng-container matColumnDef="sNo">
                  <th mat-header-cell *matHeaderCellDef>S.No</th>
                  <td mat-cell *matCellDef="let element; let i = index">
                    {{ (paginatorRef.pageIndex * paginatorRef.pageSize) + (i + 1) }}
                  </td>
                </ng-container>

                <!-- Position Column -->
                <ng-container matColumnDef="orgCode">
                  <th mat-header-cell *matHeaderCellDef>Organization</th>
                  <td mat-cell *matCellDef="let element"> {{element.orgCode}} - {{element.orgName}}
                  </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="scCode">
                  <th mat-header-cell *matHeaderCellDef>Scorecard</th>
                  <td mat-cell *matCellDef="let element"> {{element.scCode}} - {{element.scName}}</td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="code">
                  <th mat-header-cell *matHeaderCellDef>Initiative</th>
                  <td mat-cell *matCellDef="let element"> {{element.code}} - {{element.name}}</td>
                </ng-container>

                <ng-container matColumnDef="reportingFrequency">
                  <th mat-header-cell *matHeaderCellDef>Reporting Frequency</th>
                  <td mat-cell *matCellDef="let element"> {{element.reportingFrequency}}</td>
                </ng-container>

                <ng-container matColumnDef="budget">
                  <th mat-header-cell *matHeaderCellDef>Budget</th>
                  <td mat-cell *matCellDef="let element"> {{element.budget}}</td>
                </ng-container>

                <ng-container matColumnDef="currencyType">
                  <th mat-header-cell *matHeaderCellDef>Currency</th>
                  <td mat-cell *matCellDef="let element"> {{element.currencyType ? element.currencyType: 'NA'}}</td>
                </ng-container>

                <ng-container matColumnDef="owner">
                  <th mat-header-cell *matHeaderCellDef>Owner</th>
                  <td mat-cell *matCellDef="let element"> {{element.owner ? element.owner : 'NA'}}</td>
                </ng-container>

                <ng-container matColumnDef="startDate">
                  <th mat-header-cell *matHeaderCellDef>Start Date</th>
                  <td mat-cell *matCellDef="let element"> {{element.startDate}}</td>
                </ng-container>

                <ng-container matColumnDef="endDate">
                  <th mat-header-cell *matHeaderCellDef>End Date</th>
                  <td mat-cell *matCellDef="let element"> {{element.endDate}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef>Status</th>
                  <td mat-cell *matCellDef="let element"> {{element.status ? element.status : 'NA'}}</td>
                </ng-container>

                <ng-container matColumnDef="percentComplete">
                  <th mat-header-cell *matHeaderCellDef>Percent Complete</th>
                  <td mat-cell *matCellDef="let element"> {{element.percentComplete ? element.percentComplete : 0}}%
                  </td>
                </ng-container>
                <ng-container matColumnDef="completed">
                  <th mat-header-cell *matHeaderCellDef>Completed</th>
                  <td mat-cell *matCellDef="let element"> {{element.completed ? 'Completed' : 'Incomplete'}}</td>
                </ng-container>
                <ng-container matColumnDef="completionDate">
                  <th mat-header-cell *matHeaderCellDef>Completion Date</th>
                  <td mat-cell *matCellDef="let element"> {{element.completionDate ? element.completionDate : 'NA'}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <span class="btn btn-pink btn-sm">
                      <i class="fa fa-pencil p-1" (click)="editInitiative(element.id, element)"></i>
                      <i class="fa fa-trash p-1" (click)="confirmDelete(element.id)"></i>
                    </span>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-primary"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

              </table>
            
              <mat-paginator [pageSizeOptions]="[2,4,6,8,10]" [pageSize]="10" #paginatorRef>
              </mat-paginator>
            
              <h6 class="text-center p-2" *ngIf="allInitiatives.length === 0">No Initiatives exist, Please Add.</h6>
            </div>
          </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
